{% extends 'base.html' %}

{% block title %}Sensors Dashboard{% endblock %}

{% block content %}

{% include 'navbar.html' %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sensor List</title>
</head>
<body>
    <h1>Sensor List</h1>
    
   
    <form action="{{ url_for('sensors') }}" method="get">
        <label for="id">Sensor ID:</label>
        <input type="text" name="id" id="id" placeholder="Search by ID">
        
        <label for="sensorname">Sensor Name:</label>
        <input type="text" name="sensorname" id="sensorname" placeholder="Search by Name">

        <!-- Toggle Button for Highest/Lowest Temperature -->
        <label for="filter">Filter by Temperature:</label>
        <select name="filter" id="filter">
            <option value="highest" {% if filter == 'highest' %}selected{% endif %}>Highest</option>
            <option value="lowest" {% if filter == 'lowest' %}selected{% endif %}>Lowest</option>
        </select>

        <!-- Submit Button for Search -->
        <button type="submit">Search</button>
    </form>

    <table border="1">
        <thead>
            <tr>
                <th>Sensor ID</th>
                <th>Sensor Name</th>
                <th>Location</th>
                <th>Temperature</th>
                <th>Timestamp</th>
            </tr>
        </thead>
        <tbody>
            {% for sensor in sensors %}
            <tr>
                <td>{{ sensor['id'] }}</td>
                <td>{{ sensor['sensor_name'] }}</td>
                <td>{{ sensor['location'] }}</td>
                <td>{{ sensor['temperature'] if sensor['temperature'] is not none else 'N/A' }}</td>
                <td>{{ sensor['timestamp'] if sensor['timestamp'] is not none else 'N/A' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>



<style>

.table-container{
width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    justify-content: flex-start;
    overflow-y: scroll;
}

th {
    width: auto;
    background-color: rgb(224, 224, 224);
    padding: 10px;
    font-size: 20px;
    white-space: nowrap;
}

td {
    height: 1%;
    white-space: nowrap;
    text-align: center;
    padding: 5px 10px;
    background-color: white;
    box-sizing: border-box;
}


#dashboard {
    width: calc(100vw - 50px);
    height: calc(100vh - 120px);
    display: grid;
    align-items: center;
    justify-items: center;
    justify-content: center;
    grid-template-columns: 1fr;
    grid-template-rows: 0.1fr 0.8fr 0.1fr;
    overflow-y: scroll;
    padding: 25px;
    background-color: rgb(241, 241, 241);
}

.container {
            margin-top: 50px;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin: 0 auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 15px;
            text-align: left;
        }

</style>
{% endblock %}

